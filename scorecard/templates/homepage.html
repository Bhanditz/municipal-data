{% extends '_base.html' %}
{% load pipeline staticfiles %}

{% block body_id %}homepage{% endblock %}

{% block head_facebook_tags %}
    <meta property="og:title" content="Municipal Money South Africa" />
    <meta property="og:site_name" content="Municipal Money" />
    <meta property="og:description" content="How well is your municipality managing its money? Explore municipal financial performance across South Africa." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://municipalmoney.gov.za{% static 'img/video-placeholder.jpg' %}" />
{% endblock %}

{% block content_container %}
<div id="homepage-search">
  <div class="container">
    <div class="row">
      <div class="col-md-5">
        <h1>Find data on municipal finances, basic services, social services, and economic growth.</h1>
      </div>
      <div class="col-md-6">
        <div class="search-container">
          <input type="text" class="form-control" id="geography-select-home" placeholder="Search for a municipality in South Africa">
        </div>
        <div class="geolocate-only">
          <span class="or">or</span>
          <a href="/locate" class="btn btn-primary" id="homepage-button-geolocate"><i class="fa fa-location-arrow"></i> Use your current location</a>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="homepage-video" class="section">
  <div class="container">
    <h1>A quick introduction to the <strong>Municipal Barometer</strong></h1>

    <div class="row">
      <div class="col-md-6">
        {% include "_videos.html" %}
      </div>

      <div class="col-md-6">
        <h2>The SALGA Municipal Barometer, making South Africa better, one municipality at a time.</h2>

        <p class="lead">
        The municipal barometer provides insights, data, facts, and figures for better planning and reporting to stakeholders.
        </p>
        <p class="lead">
          <a class="btn btn-primary btn-lg" href="/about">Find out more â†’</a>
        </p>
        </p>
      </div>
    </div>
  </div>
</div>

<div id="homepage-map">
  <div class="container">
    <h1>Where do you live?</h1>
  </div>

  <div id="slippy-map"></div>
</div>

{% endblock %}

{% block body_javascript_extra %}
{{ block.super }}

<script>
// show 'use my current location' button
if (Modernizr.geolocation) {
    $('.geolocate-only').show();
}
// geoSelect already defined by widget.geo.select.js
geoSelect.focus()

var maps = new Maps();
var centre = [-28.5, 25];
var zoom = 5;
maps.drawMapForHomepage(centre, zoom);
</script>
{% endblock %}
